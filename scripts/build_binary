#!/usr/bin/env bash
set -euo pipefail

# Builds the CLI binary used by all manual test scripts.
# Expected outcome:
# - Creates: .manual-test/component-to-crd
# - Exit code: 0

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
REPO_DIR="$(cd "$SCRIPT_DIR/.." && pwd)"
BIN_DIR="$REPO_DIR/bin"
BIN_PATH="$BIN_DIR/component-to-crd"

cd "$REPO_DIR"
mkdir -p "$BIN_DIR"
go build -o "$BIN_PATH" ./cmd/component-to-crd

echo "built $BIN_PATH"
